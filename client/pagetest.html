<head>
    <title>pagetest</title>
    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
</head>

<body>
    <header>
    <h3><i class="fa fa-dashboard"></i> Pagevamp Metrics Dashboard</h3>
    </header>
    <div class="body">
        <div class="row">
        {{> latestSites}}
        {{> latestCustomers}}
        </div>
        <div class="row">
            {{> monthlyVTP}}
            {{> weeklyVTP}}
        </div>
        <div class="row">
        </div>
        <div class="row">
            {{> stripeFailures}}
            {{> vampErrors}}
        </div>
    </div>
</body>


<template name="vampErrors">
<div class="card sf-container">
    <h2>Latest PageVamp Errors</h2>
    <ul class="scroll-container">
        {{#each errors}}
        {{> vRow}}
        {{/each}}
    </ul>
</div>
</template>

<!-- vRow needs more work-->
<template name="vRow">
    <li class="page-row">
    <div class="inner-container">
        <div>{{pageid}}</div>
        <div>{{url}}</div>
        <div>{{message}}</div>
        <div>{{error_code}}</div>
        <div>{{timestamp}}</div>
    </div>
    </li>
</template>

<template name="stripeFailures">
<div class="card sf-container">
    <h2>Latest Stripe Failures</h2>
    <ul class="scroll-container">
        {{#each failures}}
        {{> sfRow}}
        {{/each}}
    </ul>
</div>
</template>

<template name="sfRow">
    <li class="page-row">
    <div class="inner-container">
        <div>{{firstname}} {{lastname}}</div>
        <div>{{email}}</div>
        <div>{{pageid}}</div>
        <div>{{reason}}</div>
        <div>{{transactionDate}}</div>
    </div>
    </li>
</template>

<template name="weeklyVTP">
    <div class="card small">
        <div class="vtp-container">
        <h2>Weekly VTP</h2>
        <canvas height="400" width="800" id="weeklyVTP"></canvas>
        <div id="weeklyVTPLegend">
        </div>
    </div>
    </div>
</template>

<template name="monthlyVTP">
    <div class="card small">
        <div class="vtp-container">
        <h2>Monthly VTP</h2>
        <canvas height="400" width="800" id="monthlyVTP"></canvas>
        <div id="monthlyVTPLegend">
        </div>
    </div>
</div>
</template>

<template name="latestCustomers">
<div class="card lc-container">
    <h2>Latest Paying Customers</h2>
    <ul class="scroll-container">
        {{#each subscriptions}}
        {{> lcRow}}
        {{/each}}
    </ul>
</div>
</template>

<template name="lcRow">
    <li class="page-row">
    <div class="inner-container">
        <div>{{firstname}} {{lastname}}</div>
        <div>{{email}}</div>
        <div>{{uid}}</div>
        <div>{{firstPayment}}</div>
        <div>{{nextPayment}}</div>
    </div>
<a target="_blank" href="https://pagevamp.com/page/{{pageid}}">
    <i class="fa fa-link"></i>
</a>
    </li>
</template>

<template name="latestSites">
<div class="card ls-container">
    <h2>Latest Published Sites</h2>
    <ul class="scroll-container">
        {{#each fbpages}}
        {{> lsPageRow}}
        {{/each}}
    </ul>
</div>
</template>

<template name="lsPageRow">
    <li class="page-row">
    <div class="inner-container">
        <div class="image">
            <img src="{{pic_square}}"/>
        </div>
        <div>{{name}}</div>
        <div>{{category}}</div>
        <div>{{pageid}}</div>
        <div>{{timestamp}}</div>
    </div>
<a target="_blank" href="https://pagevamp.com/page/{{pageid}}">
    <i class="fa fa-link"></i>
</a>
    </li>
</template>


<template name="analyticsBody">
<button id="al">Log In to Analytics</button>
{{> lineGraph}}
</template>

<template name="lineGraph">
<canvas id="lineGraph" width="400" height="400"></canvas>
</template>

<template name="sqlbody">
<h1>Comparison of elo in winning and losing games</h1>
{{> game}}
</template>

<template name="game">
<div class="game">
    <div class="match header">
        <div class="winner">
            Winners
        </div>

        <div class="loser">
            Losers
        </div>
    </div>

    {{#each matches}}
    {{> match}}
    {{/each}}
</div>
</template>

<template name="match">
<div class="match">
    <div class="role winner {{winner}}">
        {{winner}}
    </div>
    <div class="role loser {{loser}}">
        {{loser}}
    </div>
</div>
</template>
